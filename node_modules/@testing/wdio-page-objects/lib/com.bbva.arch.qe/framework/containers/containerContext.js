"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ContainerContext = exports.InternalComponentContext = void 0;
require("@testing/wdio-shadow-service");
const containerProvider_1 = require("./containerProvider");
const callsites = require("callsites");
const isElementDisplayed_1 = require("@testing/wdio-shadow-service/lib/isElementDisplayed");
/**
 * @hidden
 */
function InternalComponentContext(ctx, register = true) {
    const callsite = callsites()[2];
    return (target) => {
        if (!ctx.context) {
            ctx.context = "web";
        }
        if (!ctx.visibilityCheckConfig) {
            ctx.visibilityCheckConfig = isElementDisplayed_1.VisibilityCheckType.WebDriverIoIsVisible;
        }
        const value = {
            [target.name]: class extends target {
                constructor() {
                    super(...arguments);
                    this.context = ctx;
                    this.type = target.name;
                    this.__filename = callsite.getFileName();
                }
            }
        }[target.name];
        if (register) {
            containerProvider_1.containerProvider.register(value);
        }
        return value;
    };
}
exports.InternalComponentContext = InternalComponentContext;
/**
 *
 * Decorator to be used with [ContainerObjects](./containers_ContainerObject.md)
 * through which metadata is provided in order to indetify the Object by linking it
 * to an existing DOM element
 *
 * -----------------------
 *
 * @hidden
 */
function ContainerContext(ctx) {
    return InternalComponentContext(ctx);
}
exports.ContainerContext = ContainerContext;
//# sourceMappingURL=containerContext.js.map