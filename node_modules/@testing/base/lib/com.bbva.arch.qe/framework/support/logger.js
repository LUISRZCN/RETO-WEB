"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getLogger = void 0;
const log4js_1 = require("log4js");
const layouts_1 = require("log4js/lib/layouts");
const lodash_1 = require("lodash");
const defaultLogConfig_1 = require("./defaultLogConfig");
log4js_1.addLayout('context', config => {
    return logEvent => {
        const context = JSON.stringify(global['__context']);
        return (layouts_1.basicLayout(logEvent) +
            ' |*****************| ' +
            context +
            ' |*****************|');
    };
});
const LOG4JS_FILE = process.env.LOG$JS_FILE || './config/log4js.json';
const providedConfig = Promise.resolve().then(() => require(LOG4JS_FILE)).catch(() => { });
log4js_1.configure(lodash_1.merge({}, defaultLogConfig_1.LogConfig, providedConfig));
/**
 * Acquires a logger instance for the specified category.
 * @param category The category of the logger
 */
function getLogger(category) {
    return log4js_1.getLogger(category);
}
exports.getLogger = getLogger;
//# sourceMappingURL=logger.js.map